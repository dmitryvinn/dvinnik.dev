<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.b0d7e5e5e853b677ab2d.css" id="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-100{--bg-opacity:1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.bg-indigo-100{--bg-opacity:1;background-color:#ebf4ff;background-color:rgba(235,244,255,var(--bg-opacity))}.bg-indigo-900{--bg-opacity:1;background-color:#3c366b;background-color:rgba(60,54,107,var(--bg-opacity))}.bg-pink-400{--bg-opacity:1;background-color:#f687b3;background-color:rgba(246,135,179,var(--bg-opacity))}.bg-pink-500{--bg-opacity:1;background-color:#ed64a6;background-color:rgba(237,100,166,var(--bg-opacity))}.border-transparent{border-color:transparent}.border-white{--border-opacity:1;border-color:#fff;border-color:rgba(255,255,255,var(--border-opacity))}.border-gray-200{--border-opacity:1;border-color:#edf2f7;border-color:rgba(237,242,247,var(--border-opacity))}.border-gray-300{--border-opacity:1;border-color:#e2e8f0;border-color:rgba(226,232,240,var(--border-opacity))}.border-indigo-100{--border-opacity:1;border-color:#ebf4ff;border-color:rgba(235,244,255,var(--border-opacity))}.border-indigo-200{--border-opacity:1;border-color:#c3dafe;border-color:rgba(195,218,254,var(--border-opacity))}.border-pink-500{--border-opacity:1;border-color:#ed64a6;border-color:rgba(237,100,166,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.border-4{border-width:4px}.border{border-width:1px}.border-t{border-top-width:1px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.hidden{display:none}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.order-last{order:9999}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-2{height:.5rem}.h-3{height:.75rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-10{height:2.5rem}.h-16{height:4rem}.h-px{height:1px}.h-full{height:100%}.text-xs{font-size:.75rem}.text-lg{font-size:1.125rem}.leading-normal{line-height:1.5}.m-0{margin:0}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.-mx-3{margin-left:-.75rem;margin-right:-.75rem}.ml-0{margin-left:0}.mt-1{margin-top:.25rem}.mb-1{margin-bottom:.25rem}.ml-1{margin-left:.25rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mt-3{margin-top:.75rem}.mr-3{margin-right:.75rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-10{margin-top:2.5rem}.mb-10{margin-bottom:2.5rem}.mt-auto{margin-top:auto}.mr-auto{margin-right:auto}.-mt-2{margin-top:-.5rem}.-mt-px{margin-top:-1px}.-mb-px{margin-bottom:-1px}.max-w-screen-sm{max-width:640px}.max-w-screen-md{max-width:768px}.min-h-screen{min-height:100vh}.opacity-0{opacity:0}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.overflow-hidden{overflow:hidden}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.px-0{padding-left:0;padding-right:0}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.px-8{padding-left:2rem;padding-right:2rem}.pb-0{padding-bottom:0}.pt-2{padding-top:.5rem}.absolute{position:absolute}.relative{position:relative}.left-0{left:0}.focus\:shadow-outline:focus{box-shadow:0 0 0 3px rgba(66,153,225,.5)}.text-left{text-align:left}.text-center{text-align:center}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-indigo-600{--text-opacity:1;color:#5a67d8;color:rgba(90,103,216,var(--text-opacity))}.text-indigo-900{--text-opacity:1;color:#3c366b;color:rgba(60,54,107,var(--text-opacity))}.text-pink-500{--text-opacity:1;color:#ed64a6;color:rgba(237,100,166,var(--text-opacity))}.hover\:text-indigo-600:hover{--text-opacity:1;color:#5a67d8;color:rgba(90,103,216,var(--text-opacity))}.hover\:text-indigo-700:hover{--text-opacity:1;color:#4c51bf;color:rgba(76,81,191,var(--text-opacity))}.hover\:text-indigo-900:hover{--text-opacity:1;color:#3c366b;color:rgba(60,54,107,var(--text-opacity))}.uppercase{text-transform:uppercase}.visible{visibility:visible}.invisible{visibility:hidden}.w-2{width:.5rem}.w-3{width:.75rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-10{width:2.5rem}.w-16{width:4rem}.w-px{width:1px}.w-full{width:100%}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:flex{display:flex}.sm\:hidden{display:none}.sm\:flex-row{flex-direction:row}.sm\:order-none{order:0}.sm\:my-0{margin-bottom:0}.sm\:mt-0,.sm\:my-0{margin-top:0}.sm\:ml-8{margin-left:2rem}.sm\:py-16{padding-top:4rem;padding-bottom:4rem}.sm\:px-16{padding-left:4rem;padding-right:4rem}.sm\:w-auto{width:auto}.sm\:w-1\/2{width:50%}.sm\:w-1\/3{width:33.333333%}.sm\:w-2\/3{width:66.666667%}}</style><meta name="generator" content="Gatsby 2.28.1"/><title data-react-helmet="true">Sending Messages with WhatsApp in Your Python Applications | Dmitry Vinnik</title><link data-react-helmet="true" rel="canonical" href="https://developers.facebook.com/blog/post/2022/10/24/sending-messages-with-whatsapp-in-your-python-applications/"/><meta data-react-helmet="true" name="description" content="This article describes how you can integrate the Cloud API, hosted by Meta, Meta’s integration of the WhatsApp Business Platform, into a Python application to enable sending and managing WhatsApp messages."/><meta data-react-helmet="true" property="og:title" content="Sending Messages with WhatsApp in Your Python Applications"/><meta data-react-helmet="true" property="og:description" content="This article describes how you can integrate the Cloud API, hosted by Meta, Meta’s integration of the WhatsApp Business Platform, into a Python application to enable sending and managing WhatsApp messages."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Dmitry Vinnik"/><meta data-react-helmet="true" name="twitter:title" content="Sending Messages with WhatsApp in Your Python Applications"/><meta data-react-helmet="true" name="twitter:description" content="This article describes how you can integrate the Cloud API, hosted by Meta, Meta’s integration of the WhatsApp Business Platform, into a Python application to enable sending and managing WhatsApp messages."/><link rel="icon" href="/favicon-32x32.png?v=497aa5f4fadc424139ee8aeb24d12e8d" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#4C6E94"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=497aa5f4fadc424139ee8aeb24d12e8d"/><style data-styled="" data-styled-version="5.2.1">.fJZWkr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;-webkit-order:9999;-ms-flex-order:9999;order:9999;margin-top:1rem;margin-bottom:1rem;display:none;}/*!sc*/
@media (min-width:640px){.fJZWkr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:auto;-webkit-order:0;-ms-flex-order:0;order:0;margin-top:0;margin-bottom:0;}}/*!sc*/
data-styled.g1[id="styles__MainNav-sc-1eal8ua-0"]{content:"fJZWkr,"}/*!sc*/
.wsNZD{position:relative;color:#3c366b;border-bottom-width:1px;border-color:transparent;margin-left:0;margin-top:0.75rem;width:-webkit-max-content;width:-moz-max-content;width:max-content;}/*!sc*/
.wsNZD:hover{color:#3c366b;}/*!sc*/
@media (min-width:640px){.wsNZD{margin-left:2rem;margin-top:0;}}/*!sc*/
.wsNZD.active{border-color:#ed64a6;}/*!sc*/
.wsNZD:before{position:absolute;width:100%;background-color:#ed64a6;height:1px;left:0;visibility:hidden;content:'';bottom:-1px;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);-webkit-transition:0.2s;transition:0.2s;}/*!sc*/
.wsNZD:hover:before{visibility:visible;-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);}/*!sc*/
data-styled.g2[id="styles__MainNavItem-sc-1eal8ua-1"]{content:"wsNZD,"}/*!sc*/
.cXNNMK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;width:1.5rem;height:1.25rem;outline:none !important;}/*!sc*/
@media (min-width:640px){.cXNNMK{display:none;}}/*!sc*/
.cXNNMK span{background-color:#3c366b;display:inline-block;width:1.5rem;height:1px;-webkit-transition:0.2s;transition:0.2s;}/*!sc*/
.cXNNMK span:first-child{margin-bottom:0.25rem;-webkit-transform:none;-ms-transform:none;transform:none;}/*!sc*/
.cXNNMK span:last-child{margin-top:0.25rem;-webkit-transform:none;-ms-transform:none;transform:none;}/*!sc*/
.cXNNMK span:nth-child(2){background-color:#ed64a6;display:inline-block;width:2rem;height:1px;opacity:undefined;-webkit-transform:none;-ms-transform:none;transform:none;}/*!sc*/
data-styled.g3[id="styles__ToogleMainNav-sc-1eal8ua-2"]{content:"cXNNMK,"}/*!sc*/
.fkIVaM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:auto;color:#3c366b;}/*!sc*/
.fkIVaM:hover{color:#3c366b;}/*!sc*/
data-styled.g4[id="styles__Logo-sc-1h7lg0r-0"]{content:"fkIVaM,"}/*!sc*/
.caGyer{font-size:1.125rem;}/*!sc*/
data-styled.g5[id="styles__Text-sc-1h7lg0r-1"]{content:"caGyer,"}/*!sc*/
.jDHioa{width:4rem;height:4rem;margin-right:0.75rem;border-width:1px;border-color:#ed64a6;border-radius:9999px;}/*!sc*/
.jDHioa img{border-width:4px;border-color:#fff;border-radius:9999px;}/*!sc*/
data-styled.g6[id="styles__Image-sc-1h7lg0r-2"]{content:"jDHioa,"}/*!sc*/
.iQtGGd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;max-width:768px;width:100%;margin-left:auto;margin-right:auto;padding:1.25rem;}/*!sc*/
.jGsbyr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;max-width:768px;width:100%;margin-left:auto;margin-right:auto;padding:1.25rem;padding-top:2rem;padding-bottom:2rem;}/*!sc*/
@media (min-width:640px){.jGsbyr{padding-top:4rem;padding-bottom:4rem;}}/*!sc*/
data-styled.g7[id="styles__Container-xp16ym-0"]{content:"iQtGGd,jGsbyr,"}/*!sc*/
.jSvyKG{background-color:#f7fafc;border-bottom-width:1px;border-color:#edf2f7;margin-bottom:-1px;}/*!sc*/
data-styled.g8[id="styles__Header-sc-144zgxa-0"]{content:"jSvyKG,"}/*!sc*/
.cpSNsf{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g9[id="styles__Wrapper-sc-144zgxa-1"]{content:"cpSNsf,"}/*!sc*/
.jdnYan{border-top-width:1px;border-color:#edf2f7;padding-top:1rem;padding-bottom:1rem;}/*!sc*/
data-styled.g10[id="styles__Footer-sc-1r3lm65-0"]{content:"jdnYan,"}/*!sc*/
.fxUteA{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;}/*!sc*/
.fxUteA a{color:#3c366b;margin-left:0.5rem;margin-right:0.5rem;}/*!sc*/
.fxUteA a:hover{color:#5a67d8;}/*!sc*/
data-styled.g11[id="styles__Links-sc-1r3lm65-1"]{content:"fxUteA,"}/*!sc*/
.fkcqvg{color:#3c366b;margin-left:0.5rem;margin-right:0.5rem;}/*!sc*/
.fkcqvg:hover{color:#5a67d8;}/*!sc*/
data-styled.g12[id="styles__Link-sc-1r3lm65-2"]{content:"fkcqvg,"}/*!sc*/
.fhyJEi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}/*!sc*/
data-styled.g14[id="styles__TitleSection-sc-1o34wm-0"]{content:"fhyJEi,"}/*!sc*/
.kVydTB{text-transform:uppercase;margin-bottom:1rem;font-size:1.125rem;font-weight:700;width:100%;text-align:left;}/*!sc*/
data-styled.g15[id="styles__Title-sc-1o34wm-1"]{content:"kVydTB,"}/*!sc*/
.dOCodo{font-size:0.75rem;color:#ed64a6;width:100%;text-align:left;}/*!sc*/
data-styled.g16[id="styles__SubTitle-sc-1o34wm-2"]{content:"dOCodo,"}/*!sc*/
.idDjmX{position:relative;width:0.5rem;height:2rem;margin-bottom:1.5rem;margin-top:-0.5rem;}/*!sc*/
.idDjmX:before{content:'';background-color:#3c366b;height:100%;width:1px;position:absolute;left:0;}/*!sc*/
.idDjmX:after{content:'';background-color:#ed64a6;height:1.5rem;width:1px;position:absolute;margin-left:0.25rem;}/*!sc*/
data-styled.g17[id="styles__Separator-sc-1o34wm-3"]{content:"idDjmX,"}/*!sc*/
body{margin:0;color:#3c366b;background-color:#fff;}/*!sc*/
a{color:#5a67d8;}/*!sc*/
a:hover{color:#4c51bf;}/*!sc*/
p + p{margin-top:0.75rem;}/*!sc*/
data-styled.g21[id="sc-global-SVgEa1"]{content:"sc-global-SVgEa1,"}/*!sc*/
.hfvmqg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}/*!sc*/
data-styled.g22[id="styles__Layout-bbimyf-0"]{content:"hfvmqg,"}/*!sc*/
.eRMmaM{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:2.5rem;}/*!sc*/
data-styled.g108[id="styles__Links-sc-98kju8-2"]{content:"eRMmaM,"}/*!sc*/
</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-ff9530d4c8ded61dbb9e.js"/><link as="script" rel="preload" href="/framework-56bdf4394a9c3db6c360.js"/><link as="script" rel="preload" href="/app-96a28347aa25e907c7cb.js"/><link as="script" rel="preload" href="/styles-7d4153d260c0197f0043.js"/><link as="script" rel="preload" href="/05d954cf-d7358ef673e395e46104.js"/><link as="script" rel="preload" href="/98d8696d19cb7e433ab012e1949034b5f4e8a4cc-1ecf9e41a68214d6ae0a.js"/><link as="script" rel="preload" href="/component---src-templates-article-index-js-900d676c88020a755312.js"/><link as="fetch" rel="preload" href="/page-data/articles/2022/whatsapp-api-with-python/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2125292342.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2915660680.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="styles__Layout-bbimyf-0 hfvmqg"><header class="styles__Header-sc-144zgxa-0 jSvyKG"><div class="styles__Container-xp16ym-0 styles__Wrapper-sc-144zgxa-1 iQtGGd cpSNsf"><a class="styles__Logo-sc-1h7lg0r-0 fkIVaM" href="/"><figure class="styles__Image-sc-1h7lg0r-2 jDHioa"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAB6x3sjjVWJhWobf/EAB0QAAICAgMBAAAAAAAAAAAAAAECAAMREgQTIkH/2gAIAQEAAQUCLjXkAY+IdWNDGIJnI7nqan3P/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAECEDH/2gAIAQMBAT8BjS0Z/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECEP/aAAgBAgEBPwG8Yj//xAAdEAEAAgICAwAAAAAAAAAAAAABABECEiExEEFS/9oACAEBAAY/AtcSY69+LS5xVMTPsahAHh9MzX6n/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBUWFxwf/aAAgBAQABPyG9xF3CaBMpAaXuEFYcS2o8wjgjh42S4+lhcUvoiptq+T//2gAMAwEAAgADAAAAECAwwP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAMYH/2gAIAQMBAT8QyyJZctX/xAAYEQEBAQEBAAAAAAAAAAAAAAABADERkf/aAAgBAgEBPxBcQhGz7Yv/xAAgEAEBAAICAAcAAAAAAAAAAAABEQAhMUFRcYGRodHw/9oACAEBAAE/EHCRyxLukPvKzKx93oU5bmqZBfPF+1Mds1kRwDmh7+swIttKo6EfnBFAAa7/AFwKSihTbrwxyQ2oQ4x//9k=" alt="Dmitry Vinnik" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/a9af73e754c7098769366313b54425a0/a0bab/profile.jpg 20w,
/static/a9af73e754c7098769366313b54425a0/b13df/profile.jpg 40w,
/static/a9af73e754c7098769366313b54425a0/4e333/profile.jpg 80w,
/static/a9af73e754c7098769366313b54425a0/b2712/profile.jpg 120w,
/static/a9af73e754c7098769366313b54425a0/e75b5/profile.jpg 160w,
/static/a9af73e754c7098769366313b54425a0/d3376/profile.jpg 460w" sizes="(max-width: 80px) 100vw, 80px" /><img loading="lazy" sizes="(max-width: 80px) 100vw, 80px" srcset="/static/a9af73e754c7098769366313b54425a0/a0bab/profile.jpg 20w,
/static/a9af73e754c7098769366313b54425a0/b13df/profile.jpg 40w,
/static/a9af73e754c7098769366313b54425a0/4e333/profile.jpg 80w,
/static/a9af73e754c7098769366313b54425a0/b2712/profile.jpg 120w,
/static/a9af73e754c7098769366313b54425a0/e75b5/profile.jpg 160w,
/static/a9af73e754c7098769366313b54425a0/d3376/profile.jpg 460w" src="/static/a9af73e754c7098769366313b54425a0/4e333/profile.jpg" alt="Dmitry Vinnik" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><h1 class="styles__Text-sc-1h7lg0r-1 caGyer">Dmitry Vinnik</h1></a><nav class="styles__MainNav-sc-1eal8ua-0 fJZWkr"><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/">About Me</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/articles/">Articles</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/videos/">Videos</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/events/">Events</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/conversations/">Conversations</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/presentations/">Presentations</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/devrel-resources/">DevRel Resources</a><a whileTap="[object Object]" class="styles__MainNavItem-sc-1eal8ua-1 wsNZD" href="/contact/">Contact Me</a></nav><button class="styles__ToogleMainNav-sc-1eal8ua-2 cXNNMK"><span></span><span></span><span></span></button></div></header><div style="opacity:0;transform:translateY(30px) translateZ(0)"><div class="styles__Container-xp16ym-0 jGsbyr"><div class="styles__TitleSection-sc-1o34wm-0 fhyJEi"><h4 class="styles__SubTitle-sc-1o34wm-2 dOCodo">Oct 24, 2022</h4><h2 class="styles__Title-sc-1o34wm-1 kVydTB">Sending Messages with WhatsApp in Your Python Applications</h2><h2 class="styles__Separator-sc-1o34wm-3 idDjmX"></h2></div><span class="format-html"><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 65.10416666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHakiwX/8QAGBAAAwEBAAAAAAAAAAAAAAAAABARITH/2gAIAQEAAQUC0q6Rf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQACAwAAAAAAAAAAAAAAAAEAEBEhQf/aAAgBAQABPyEAqupjTxAlf//aAAwDAQACAAMAAAAQsM//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EDcX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAQACAQUAAAAAAAAAAAAAAREAIRAxQVFhof/aAAgBAQABPxAOKnQvT5jYO3nBpS5so1c3cr74/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="cover"
        title="cover"
        src="/static/b5244b3762f2e13d4167c29e21852bf7/212bf/cover.jpg"
        srcset="/static/b5244b3762f2e13d4167c29e21852bf7/7809d/cover.jpg 192w,
/static/b5244b3762f2e13d4167c29e21852bf7/4ecad/cover.jpg 384w,
/static/b5244b3762f2e13d4167c29e21852bf7/212bf/cover.jpg 768w,
/static/b5244b3762f2e13d4167c29e21852bf7/a2510/cover.jpg 1000w"
        sizes="(max-width: 768px) 100vw, 768px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p><em>By Dmitry Vinnik</em></p>
<p><em>Originally posted <a href="https://developers.facebook.com/blog/post/2022/10/24/sending-messages-with-whatsapp-in-your-python-applications/">here</a>.</em></p>
<p>WhatsApp Business Platform enables businesses to communicate more closely with their audiences, offering tools that allow you to automate the sending, receiving, and handling of incoming messages. For example, automated messaging allows you to welcome new customers or notify them when they contact you outside business hours.</p>
<p>This article describes how you can integrate the <a href="https://developers.facebook.com/docs/whatsapp/cloud-api/">Cloud API</a>, hosted by Meta, Meta's integration of the WhatsApp Business Platform, into a Python application to enable sending and managing WhatsApp messages.</p>
<p>Let's dive in and explore how to create a Python web app powered with WhatsApp messaging from scratch. If you'd like a preview of where we'll end up, you can <a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fgithub.com%2Ffbsamples%2Fwhatsapp-api-examples%2Ftree%2Fmain%2Fsend-messages-flight-app-python&#x26;h=AT0wUzEpdb2gTpl-r_hjQ9f_rICHwmoNhiIMTZYTAsEQW_5BSaf3d8VQp7chtXSOmRLGfQvF50Yb3eFYKpOVGhWZ_J54JKcQgB7BLIM6GG56rfdaRMxirOoJvZs5Z0KXEerit-keJqt861rvxgk7hVzD2SKk8Z1utX-yCB55QWI">download the complete application code</a>.</p>
<p><strong>Requirements</strong></p>
<p>To send and receive messages using a test phone number, follow the <a href="https://developers.facebook.com/docs/whatsapp/cloud-api/get-started#set-up-developer-assets">Set up Developer Assets and Platform Access</a> tutorial, ensuring that you complete the steps below:</p>
<p>Register for a free developer account at <a href="https://developers.facebook.com/docs/development/register/">Meta for Developers</a>.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312329265_513446693692464_6113045937350384836_n.png?_nc_cat=109&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=Urp0fjhBVf8AX-DLGue&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfBk7f6BM7BqVgeLZiR_JkzI6tOpO85ELJlNJpfdhk5-tw&#x26;oe=636960B6"></p>
<p>Enable two-factor authentication for your account:</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312539058_634382518350033_3288662865543697900_n.png?_nc_cat=106&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=r8akMXNRsZYAX8XLpap&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfC89ThMtNZMeltt34iJUYqq2GHYyhdjFc1f7djip43gLg&#x26;oe=63698507"></p>
<p><a href="https://developers.facebook.com/apps/">Create a Meta App</a>. The App Id and the App Secret will be used later in this article.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312621137_638529411138324_7626923204876657210_n.png?_nc_cat=110&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=JafmxPzHGeUAX8FAQvF&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfD2GxVd1jsSDdBlLqLHeJUg1KLZbOSav_RPO53oX0s3pQ&#x26;oe=636999E3"></p>
<p>Connect your Meta App with the WhatsApp product.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312449284_651885606337574_1970093564759688957_n.png?_nc_cat=108&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=SFzJ6U-X5OIAX8zDwc7&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfDPsoPzYuV32dfIElbzfmEg7qa88uNsSN6DeG5VGSvKNA&#x26;oe=636AA9D6"></p>
<p>Associate your app with a Business Manager.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312616143_1149456239334132_3210807206494574045_n.png?_nc_cat=104&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=W79Y7RqBFrsAX_mKdx8&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfBKfkVVWxEfFfn6Ao-wASxYKnwm1k7FWI-K8HjpdZ5bHg&#x26;oe=6369993C"></p>
<p>On the App Dashboard, open the WhatsApp > Get Started menu and configure a recipient phone number. Your app will need it as a recipient for the WhatsApp messages. This number will be used later in this article.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312528982_517380066526773_3333995588675862215_n.png?_nc_cat=105&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=b7ojZaU22GQAX86E51C&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfAuQ5dPtMdjZEobIXUm0lWQV2PeHwT36s8UYi3n-aCDMg&#x26;oe=636A7BC2"></p>
<p>Create a <a href="https://business.facebook.com/settings/system-users/">system user</a> for your Business Account.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/309450927_1075430136332729_3657664152348764273_n.png?_nc_cat=109&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=kL_xkCi6HRoAX-v3SDp&#x26;_nc_oc=AQnY3tNr4vCOdqOhUAaGYNfr16dI80I23RJO91AjCA-ks9mtDPHVXVzjhqWUwnNGbdKuIB3ikE1cJytl18DYsh-R&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfAckDJcogFtEutF3Enoh-A3q-iilcZtqcnVyD5s8fm7Sg&#x26;oe=636ABC89"></p>
<p>On the System Users page, generate a new token for your new system user, assigning your WhatsApp app and all the available permissions. This token will be used later in this article.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312614925_417836757174667_3266524168889475948_n.png?_nc_cat=105&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=7fm5dFyr_s0AX_vMUV3&#x26;_nc_oc=AQmkYimNbpJbJkaVH8g6WNwLUjgZ4S2SlAOg57Dki4Hww0dHAZF9lABHAmB82k7meqFAUzczNeziYoQlyiChqKAp&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfDpZ66b0wAzRkKg8paFxv1ES97mOhHyCA_n40z2AxhQWA&#x26;oe=636A2C40"></p>
<p>On the System Users page, configure the assets to your System User, assigning your WhatsApp app with full control. Don't forget to click the Save Changes button.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312636397_1777001352632939_4127137800539057105_n.png?_nc_cat=105&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=7WDrkjmc55cAX-Xk4Cp&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfAaYWyZwFqhx4LSJXHr8AfJS2P72RYBQAbpE939Hjn_KQ&#x26;oe=6369F840"></p>
<p>Last but not least, <a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.python.org%2Fdownloads%2F&#x26;h=AT1b828Wp2Z_pjNy7v_BFDDp47FCXBL5pAql-l2Y90MnBEVwsdzuNY6KGEW2Gj4Vhl8h7h2YUwmwqsC8izkidLCf12KHKKbB-4m4zxXd_fIYf8i0N-FwKxyYZteMzlVPKPjyMUXNX92EOujTyE-I1b-KD5TM_MSF5Adkbd_Dc4g">download and install Python</a> if you haven't already.</p>
<p><strong>The App We're Building</strong></p>
<p>Our small sample application will work as an online flight reservation service. The application will use the API to provide the user with an engaging and more personalized experience than what email communication offers. When the users log in, they're greeted by a WhatsApp message. Then, when they buy a flight ticket, they receive a message confirming the purchase.</p>
<p><strong>Creating a Minimal App with Python and Flask</strong></p>
<p>This section will help you get a new Python project up and running. We'll use Jinja, a lightweight template engine, and Flask, a micro web framework.</p>
<p>First, open a terminal and create a folder for your project. Then execute the following command:</p>
<p><code>python3 -m venv venv</code></p>
<p>This command will create a virtual environment for your Python project.</p>
<p>Then, execute the following:</p>
<p>   $ mkdir myproject
$ cd myproject
$ python3 -m venv venv</p>
<p>Next, activate the virtual environment.</p>
<p><code>$ . venv/bin/activate</code></p>
<p>Now, install Flask:</p>
<p><code>pip install flask[async]</code></p>
<p>Create an app.py file at the project root with this content:</p>
<pre><code>from flask import Flask

app = Flask(__name__)

@app.route("/")
def hello_world():
return "&#x3C;p>Hello, World!&#x3C;/p>"
</code></pre>
<p>Run the app:</p>
<p><code>$ flask run</code></p>
<p>Then, you'll see the app running locally at port 5000:</p>
<pre><code> * Serving Flask app 'app.py' (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
 * Running on http://127.0.0.1:5000 (Press CTRL+C to quit)
</code></pre>
<p>Now, visit <a href="https://l.facebook.com/l.php?u=http%3A%2F%2F127.0.0.1%3A5000%2F&#x26;h=AT0WDu32MTAjrJA4gdDBTlzeNfBkJYEGin_DtKlp7_pLkTkT-1USWvIvKLzAi8kiuc9alO1sD7_x1TDxnNioYjt5l8illBsuw6wjL4F2pa2CmloaBkdPFlS2xli2OLICG-hIa_6pVslkkYai4tf9OT08WR6hXVsE2I3HSpgiFqE">http://127.0.0.1:5000/</a> and you will see the homepage of your Python + Flask starter application:</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312569619_1469480926868321_679102252135716540_n.png?_nc_cat=108&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=Z5yYTdRH1IcAX-FeKIX&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfBHOVT4KCuEpqW3SsEHHX24FxRsfdStiLHhg27FuIjX-A&#x26;oe=6369A966"></p>
<p><strong>Creating the Sample Login Page</strong></p>
<p>To start your Flight Ticket application, you'll create a sample login form that will work as your homepage. You'll need to call the render<em>template function to render a view from a separate HTML file. Open the app.py file and modify it to import the render</em>template function:</p>
<p><code>from flask import Flask, render_template</code></p>
<p>Then replace the hello_world with the index function as follows:</p>
<pre><code>def index():
return render_template('index.html', name=__name__)
</code></pre>
<p>Create a new folder named templates and create a new file named index.html:</p>
<pre><code>\templates
        |--- index.html
</code></pre>
<p>Next, open the index.html file and add the HTML content below. Here, you're creating an example login that comes with a placeholder login and password. This way, you don't need to provide those to use the application.</p>
<p>For our web app front-end, we're using <a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fgetbootstrap.com%2F&#x26;h=AT1z2SUAgey-HLxmcBZC1qXJIfKY1D348r0fayYD409gztr32Zw2GHeqOHD7KNGn9XL413ExVVfeES90Wdo4QM82a5wcBAIRxKK4IB035K-zFQgtxe2YRA4CVqdnPhoTgqQFyrPiVx65Pzi1lUWZ3E-KCwk3BsMJzp8jXPts9-0">Bootstrap</a>. This popular library will help build a consistent, lightweight UI that comes with responsive styling, allowing us to easily run our app across devices without worrying about CSS rules.
Then, run the app again to see the new login page:</p>
<p><code>> flask run</code></p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312530709_454392320124792_2848377627871443773_n.png?_nc_cat=111&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=kXpEKfiNEt8AX9PMeCt&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfA6Vfu9EU781Ssnlv4Ok_P45pyDo_CQEdAfpq-dwqhvvA&#x26;oe=63695E77"></p>
<p><strong>Sending Text Messages with Python and WhatsApp Business</strong></p>
<p>Your Python application will need to use specific data from your Meta developer account created in the beginning of this article. For the convenience of having all of your configuration in one place, and not scattered throughout code during development, place it in a file.</p>
<p>Create a config.json file at the project root with the following settings, replacing any placeholders with details from your WhatsApp Business account dashboard:</p>
<pre><code>{
"APP_ID": "&#x3C;&#x3C;YOUR-WHATSAPP-BUSINESS-APP_ID>>",
"APP_SECRET": "&#x3C;&#x3C;YOUR-WHATSAPP-BUSINESS-APP_SECRET>>",
"RECIPIENT_WAID": "&#x3C;&#x3C;YOUR-RECIPIENT-TEST-PHONE-NUMBER>>",
"VERSION": "v13.0",
"PHONE_NUMBER_ID": "&#x3C;&#x3C;YOUR-WHATSAPP-BUSINESS-PHONE-NUMBER-ID>>",
"ACCESS_TOKEN": "&#x3C;&#x3C;YOUR-SYSTEM-USER-ACCESS-TOKEN>>"
}
</code></pre>
<p>Your login form action tells the app to POST to the /welcome route. So, you'll need a new router to:</p>
<ul>
<li>Handle the "welcome" HTTP POST request.</li>
<li>Obtain the configuration needed for the welcome message.</li>
<li>Send a welcome message via the API.</li>
<li>Redirect the app to the homepage once the message is sent. request.</li>
</ul>
<p>Now, install aiohttp to enable your app to perform asynchronous HTTP requests:</p>
<p><code>pip install aiohttp[speedups]</code></p>
<p>The above code makes an HTTP POST request to the /messages endpoint on the Meta Graph API at graph.facebook.com, passing:</p>
<ul>
<li>The Cloud API version you're working with</li>
<li>The test phone number that will receive the message (you have already configured this)</li>
<li>The access token you generated for your System User</li>
</ul>
<p>Also, note that the get<em>text</em>message_input function returns a specific data structure required for sending basic text messages.</p>
<p>Finally, run the app again:</p>
<p><code>> flask run</code></p>
<p>Then click the Login button. You'll see the WhatsApp notification popping up on your screen:</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312518669_2458920370916340_7004578034220547741_n.png?_nc_cat=111&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=LhCweacGUwwAX8MYK6Z&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfDPytaPfYIf7CvYQqV1k65I7HcuECzkalQAGqfXKujIhA&#x26;oe=636A9064"></p>
<p>Click that notification to open the WhatsApp app and see the basic text message sent by your Python application:</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312559356_844133369945441_6313326797548818294_n.png?_nc_cat=108&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=Jpvyd2SnbgwAX93YFHi&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfDEIwC-rZjk2UOfhukS34thAejhyzYQ6zew0vFtoH9dOA&#x26;oe=636A2DD7"></p>
<p>So far, you've been able to send simple messages using WhatsApp. Next, you will use templates to send more complex messages.</p>
<p><strong>Creating the Flight Catalog Page</strong></p>
<p>First, you'll create a catalog of available flights and their details so that online customers can buy tickets. This data will be stored in a separate file. Create a new \flights.py file.</p>
<p>You now need a new route for users to access the flights catalog page. Open the app.py file and import the get_flight function:</p>
<p><code>from flights import get_flights</code></p>
<p>Modify the welcome function to redirect to the catalog page instead of the index page:</p>
<p><code>return flask.redirect(flask.url_for('catalog'))</code></p>
<p>Run the app again and click the Login button. This will send your WhatsApp number a welcome message. Plus, it will redirect you to the /catalog view:</p>
<p><code>> flask run</code></p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312530996_422040903433290_1407476417702547907_n.png?_nc_cat=101&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=ICEgLbSUMMUAX9ePIlA&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfCXbj6aG2Zh1mzoLsQD_p1t1Ej3F5s0CcIynHnQAWC_Cg&#x26;oe=636AC54B"></p>
<p>Note that there is a button to buy the ticket for each flight displayed on the screen above. Next, you will configure the application to process the ticket purchase.</p>
<p><strong>Sending Templated Messages with Python and WhatsApp Business</strong></p>
<p>A message template is required to start a <a href="https://developers.facebook.com/docs/whatsapp/conversation-types">business-initiated conversation</a>. These conversations can be customer care messages or appointment reminders, payment or shipping updates, alerts, and more.</p>
<p>Open the app.py file and add an import of the get<em>templated</em>message_input and request functions:</p>
<pre><code>from flask import Flask, render_template, request
from message_helper import get_templated_message_input, get_text_message_input, send_message
</code></pre>
<p>Then, add a new function for the /buy-ticket route with the following contents:</p>
<pre><code>@app.route("/buy-ticket", methods=['POST'])
async def buy_ticket():
    flight_id = int(request.form.get("id"))
    flights = get_flights()
    flight = next(filter(lambda f: f['flight_id'] == flight_id, flights), None)
    data = get_templated_message_input(app.config['RECIPIENT_WAID'], flight)
    await send_message(data)
    return flask.redirect(flask.url_for('catalog'))
</code></pre>
<p>Next, open the message<em>helper.py file and include the get</em>templated<em>message</em>input function:</p>
<pre><code>def get_templated_message_input(recipient, flight):
return json.dumps({
"messaging_product": "whatsapp",
"to": recipient,
"type": "template",
"template": {
  "name": "sample_flight_confirmation",
  "language": {
    "code": "en_US"
  },
  "components": [
    {
      "type": "header",
      "parameters": [
        {
          "type": "document",
          "document": {
            "filename": "FlightConfirmation.pdf",
            "link": flight['document']
          }
        }
      ]
    },
    {
      "type": "body",
      "parameters": [
        {
          "type": "text",
          "text": flight['origin']
        },
        {
          "type": "text",
          "text": flight['destination']
        },
        {
          "type": "text",
          "text": flight['time']
        }
      ]
    }
  ]
}
</code></pre>
<p>  })</p>
<p>Note that we are using the <code>sample_flight_confirmation</code> template above, where we provided the flight document PDF file, the flight origin, destination, and the date/time. You can experiment with other available templates or create new ones by visiting the <a href="https://www.facebook.com/business/help/722393685250070">Message Templates</a> page.</p>
<p>Finally, run the app again and click one of the Buy buttons. This will cause your app to send a template message to your test phone number via WhatsApp:</p>
<p><code>> flask run</code></p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312597172_502049921585452_2749606302138022783_n.png?_nc_cat=101&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=-xhj1UG1xfAAX8sRJBn&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfCuIqMsxc3kjW5Cssm6xtBcm7fJycMIUoUj7pNJuMU2pQ&#x26;oe=636A5768"></p>
<p>Now, open your WhatsApp app to see the template message.</p>
<p><img src="https://scontent.fyvr1-1.fna.fbcdn.net/v/t39.2365-6/312503691_633432554970272_3159454219869186500_n.png?_nc_cat=102&#x26;ccb=1-7&#x26;_nc_sid=ad8a9d&#x26;_nc_ohc=a8SJ-X6TCEIAX8gJk3n&#x26;_nc_ht=scontent.fyvr1-1.fna&#x26;oh=00_AfCm-mBRQyjIM9NlicPfSTljWwLEv-w4UAr2gzkVX4yyrA&#x26;oe=636A543B"></p>
<p>That's it!</p>
<p>As you can see, sending messages with Python code can be straightforward. However, note the following tips and best practices for integrating WhatsApp into applications:</p>
<ul>
<li>Even if you're automating your app messages, make sure that communication with customers doesn't feel robotic. People expect a more personal experience, so ensure that you're sending more personalized messages.</li>
<li>Explore a more relaxed and informal tone. However, avoid syntax or grammar mistakes.</li>
<li>Keep your text clear and to the point.</li>
<li>When using templates, provide rich context information by using links to documents, videos, or images like those used above to depict the flights related to the tickets.</li>
</ul>
<p><strong>Conclusion</strong></p>
<p>In this article, you learned how to add messaging capability to a Python app by integrating it with a WhatsApp Business account.</p>
<p>After creating a simple Python application from scratch, you added a sample login page and configured the application to send basic welcome messages to users via the Cloud API. Finally, you added a catalog page and configured it to send template messages with flight confirmation details.</p>
<p>And this is only the tip of the iceberg. Want to learn how to configure <a href="https://developers.facebook.com/docs/whatsapp/webhooks">WebHooks</a> in your application and configure notifications about sending and receiving customer messages and business account information? Check out <a href="https://developers.facebook.com/docs/whatsapp/cloud-api">WhatsApp Business Platform documentation</a> to discover this and much more.</p></span><div class="styles__Links-sc-98kju8-2 eRMmaM"><span><a rel="previous" href="/articles/2022/meet-the-developers-mobile-edition-with-vadims/">← <!-- -->Meet the Developers: Mobile Edition (Vadims Savjolovs)</a></span><span><a rel="next" href="/articles/2022/whatsapp-api-with-nodejs/">Sending Messages via WhatsApp in Your Node.js Application<!-- --> →</a></span></div></div><footer class="styles__Footer-sc-1r3lm65-0 jdnYan"><div class="styles__Container-xp16ym-0 iQtGGd"><div class="styles__Links-sc-1r3lm65-1 fxUteA"><a href="https://twitter.com/DmitryVinnik" rel="noreferrer noopener" target="_blank" class="styles__Link-sc-1r3lm65-2 fkcqvg">Twitter</a><a href="https://github.com/dmitryvinn" rel="noreferrer noopener" target="_blank" class="styles__Link-sc-1r3lm65-2 fkcqvg">GitHub</a><a href="https://www.linkedin.com/in/dmitry-vinnik/" rel="noreferrer noopener" target="_blank" class="styles__Link-sc-1r3lm65-2 fkcqvg">LinkedIn</a></div></div></footer></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-131185434-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/2022/whatsapp-api-with-python/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-5d706e3c13518fd65865.js"],"app":["/app-96a28347aa25e907c7cb.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-fd4fb51a6fac1c18bdde.js"],"component---src-pages-articles-tsx":["/component---src-pages-articles-tsx-0531a1d2aeaf9be599ce.js"],"component---src-pages-contact-tsx":["/component---src-pages-contact-tsx-b73537c6e45fe8f47e92.js"],"component---src-pages-content-tsx":["/component---src-pages-content-tsx-987fa92345282f40ce89.js"],"component---src-pages-conversations-tsx":["/component---src-pages-conversations-tsx-9b0e00e7a7f94b7033c5.js"],"component---src-pages-devrel-resources-tsx":["/component---src-pages-devrel-resources-tsx-931a4bfe7c5412ad5e95.js"],"component---src-pages-events-tsx":["/component---src-pages-events-tsx-2b15e83d397709a389ae.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-6b3d47a3b56ea5c03b63.js"],"component---src-pages-press-mentions-tsx":["/component---src-pages-press-mentions-tsx-7797879760e865aef91b.js"],"component---src-pages-resume-tsx":["/component---src-pages-resume-tsx-146af74e31d73fa2a295.js"],"component---src-pages-talks-tsx":["/component---src-pages-talks-tsx-669a1acc67f3177caa84.js"],"component---src-pages-videos-tsx":["/component---src-pages-videos-tsx-97173c6d214d1bc3b1cc.js"],"component---src-templates-article-index-js":["/component---src-templates-article-index-js-900d676c88020a755312.js"],"component---src-templates-blog-post-index-js":["/component---src-templates-blog-post-index-js-fb8691ad1ebb5483bd16.js"],"component---src-templates-conversation-index-js":["/component---src-templates-conversation-index-js-4d1377039f7b9305f455.js"],"component---src-templates-event-index-js":["/component---src-templates-event-index-js-e6477edc1f139c5d1263.js"],"component---src-templates-video-index-js":["/component---src-templates-video-index-js-ca3553902c458d6aea48.js"]};/*]]>*/</script><script src="/polyfill-5d706e3c13518fd65865.js" nomodule=""></script><script src="/component---src-templates-article-index-js-900d676c88020a755312.js" async=""></script><script src="/98d8696d19cb7e433ab012e1949034b5f4e8a4cc-1ecf9e41a68214d6ae0a.js" async=""></script><script src="/05d954cf-d7358ef673e395e46104.js" async=""></script><script src="/styles-7d4153d260c0197f0043.js" async=""></script><script src="/app-96a28347aa25e907c7cb.js" async=""></script><script src="/framework-56bdf4394a9c3db6c360.js" async=""></script><script src="/webpack-runtime-ff9530d4c8ded61dbb9e.js" async=""></script></body></html>